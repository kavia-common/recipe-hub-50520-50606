{"is_source_file": true, "format": "Python", "description": "This file is the main entry point for a FastAPI backend service for the Recipe Hub application. It sets up application metadata, configuration loading, middleware (CORS), router registration, environment variable parsing, and health/diagnostics endpoints. It orchestrates the inclusion of other modules that define API routes for authentication, recipes, categories, favorites, and notes.", "external_files": [".env", ".auth", ".recipes", "models"], "external_methods": ["load_dotenv", "create_engine", "Base.metadata.create_all", "get_current_user", "UserRead.model_validate"], "published": ["app", "health_check", "get_runtime_config"], "classes": [{"name": "RuntimeConfig", "description": "A Pydantic model class that encapsulates limited runtime configuration information, used for diagnostics and debugging."}], "methods": [{"name": "List[str] parse_csv_env(value: str)", "description": "Parses a comma-separated environment variable into a list of strings.", "scope": "", "scopeKind": ""}, {"name": "health_check()", "description": "A health check endpoint that returns a JSON message indicating the service is healthy.", "scope": "", "scopeKind": ""}, {"name": "RuntimeConfig get_runtime_config()", "description": "Returns sanitized runtime configuration parameters useful for diagnostics.", "scope": "", "scopeKind": ""}, {"name": "read_current_user(user=Depends(get_current_user))", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["load_dotenv", "create_engine", "Base.metadata.create_all", "app.include_router", "app.add_middleware", "app.get"], "search-terms": ["FastAPI", "main.py", "health check", "runtime config", "CORS middleware", "router include", "environment variables", "database setup", "OAuth", "JWT"], "state": 2, "file_id": 3, "knowledge_revision": 26, "git_revision": "4a9739ab587aae2f93455dd4c1ee5c039b99efda", "revision_history": [{"9": "284f8118d99c6259d5eb5e5dcdbcb4c2f586a4a4"}, {"10": "f887fec5b8c29102075a9a82eb24fffba489bdfb"}, {"16": "fc26138220d19a8c1e9f6f6053627260d6f234c8"}, {"21": "fc26138220d19a8c1e9f6f6053627260d6f234c8"}, {"24": "af9170b565814075fdd0492de8e8d4a4ff2c4ea4"}, {"26": "4a9739ab587aae2f93455dd4c1ee5c039b99efda"}], "ctags": [{"_type": "tag", "name": "ACCESS_TOKEN_EXPIRE_MINUTES", "path": "/home/kavia/workspace/code-generation/recipe-hub-50520-50606/recipe_backend/src/api/main.py", "pattern": "/^ACCESS_TOKEN_EXPIRE_MINUTES = int(os.getenv(\"ACCESS_TOKEN_EXPIRE_MINUTES\", \"60\"))$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "CORS_ALLOW_ORIGINS", "path": "/home/kavia/workspace/code-generation/recipe-hub-50520-50606/recipe_backend/src/api/main.py", "pattern": "/^CORS_ALLOW_ORIGINS = parse_csv_env(os.getenv(\"CORS_ALLOW_ORIGINS\", \"\"))$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "DATABASE_URL", "path": "/home/kavia/workspace/code-generation/recipe-hub-50520-50606/recipe_backend/src/api/main.py", "pattern": "/^DATABASE_URL = os.getenv(\"DATABASE_URL\", \"\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "JWT_ALGORITHM", "path": "/home/kavia/workspace/code-generation/recipe-hub-50520-50606/recipe_backend/src/api/main.py", "pattern": "/^JWT_ALGORITHM = os.getenv(\"JWT_ALGORITHM\", \"HS256\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "JWT_SECRET", "path": "/home/kavia/workspace/code-generation/recipe-hub-50520-50606/recipe_backend/src/api/main.py", "pattern": "/^JWT_SECRET = os.getenv(\"JWT_SECRET\", \"CHANGE_ME_DEV_ONLY\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "RuntimeConfig", "path": "/home/kavia/workspace/code-generation/recipe-hub-50520-50606/recipe_backend/src/api/main.py", "pattern": "/^class RuntimeConfig(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "allow_all", "path": "/home/kavia/workspace/code-generation/recipe-hub-50520-50606/recipe_backend/src/api/main.py", "pattern": "/^allow_all = not CORS_ALLOW_ORIGINS$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/recipe-hub-50520-50606/recipe_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "auth_router", "path": "/home/kavia/workspace/code-generation/recipe-hub-50520-50606/recipe_backend/src/api/main.py", "pattern": "/^from .auth import router as auth_router, get_current_user  # noqa: E402$/", "language": "Python", "kind": "unknown", "nameref": "unknown:router"}, {"_type": "tag", "name": "default_dev_origin", "path": "/home/kavia/workspace/code-generation/recipe-hub-50520-50606/recipe_backend/src/api/main.py", "pattern": "/^default_dev_origin = \"http:\\/\\/localhost:3000\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "engine", "path": "/home/kavia/workspace/code-generation/recipe-hub-50520-50606/recipe_backend/src/api/main.py", "pattern": "/^        engine = create_engine(DATABASE_URL, pool_pre_ping=True)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "get_runtime_config", "path": "/home/kavia/workspace/code-generation/recipe-hub-50520-50606/recipe_backend/src/api/main.py", "pattern": "/^def get_runtime_config() -> RuntimeConfig:$/", "language": "Python", "typeref": "typename:RuntimeConfig", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/recipe-hub-50520-50606/recipe_backend/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "openapi_tags", "path": "/home/kavia/workspace/code-generation/recipe-hub-50520-50606/recipe_backend/src/api/main.py", "pattern": "/^openapi_tags = [$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "parse_csv_env", "path": "/home/kavia/workspace/code-generation/recipe-hub-50520-50606/recipe_backend/src/api/main.py", "pattern": "/^def parse_csv_env(value: str) -> List[str]:$/", "language": "Python", "typeref": "typename:List[str]", "kind": "function", "signature": "(value: str)"}, {"_type": "tag", "name": "read_current_user", "path": "/home/kavia/workspace/code-generation/recipe-hub-50520-50606/recipe_backend/src/api/main.py", "pattern": "/^def read_current_user(user=Depends(get_current_user)):$/", "language": "Python", "kind": "function", "signature": "(user=Depends(get_current_user))"}], "hash": "ef01e1aa0e58e45c0b422567a62d8ab1", "format-version": 4, "code-base-name": "recipe_backend", "filename": "recipe_backend/src/api/main.py", "fields": [{"name": "ACCESS_TOKEN_EXPIRE_MINUTES = int(os.getenv(\"ACCESS_TOKEN_EXPIRE_MINUTES\", \"60\"))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "CORS_ALLOW_ORIGINS = parse_csv_env(os.getenv(\"CORS_ALLOW_ORIGINS\", \"\"))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DATABASE_URL = os.getenv(\"DATABASE_URL\", \"\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "JWT_ALGORITHM = os.getenv(\"JWT_ALGORITHM\", \"HS256\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "JWT_SECRET = os.getenv(\"JWT_SECRET\", \"CHANGE_ME_DEV_ONLY\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "allow_all = not CORS_ALLOW_ORIGINS", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "default_dev_origin = \"http:\\/\\/localhost:3000\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "engine = create_engine(DATABASE_URL, pool_pre_ping=True)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "openapi_tags = [", "scope": "", "scopeKind": "", "description": "unavailable"}]}